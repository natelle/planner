<%- include ../header.ejs %>

<h2><%= __("company.edit") %></h2>
<br>
<form action="/company/update" method="post">
    <input type="hidden" name="id" value="<%= company.id %>" id="id">
    <div class="form-group row">
        <label class="col-sm-2" for="name"><%= __("company.name") %></label>
        <div class="col-sm-10">
            <input type="text" name="name" value="<%= company.name %>" class="form-control" id="name" placeholder="<%= __("company.name") %>">
        </div>
    </div>
    <div class="form-group row">
        <label class="col-sm-2" for="email"><%= __("company.email") %></label>
        <div class="col-sm-10">
            <input type="email" name="email" value="<%= company.email %>" class="form-control" id="email" placeholder="<%= __("company.email") %>">
        </div>
    </div>
    <div class="form-group row">
        <label class="col-sm-2" for="phone"><%= __("company.phone") %></label>
        <div class="col-sm-10">
            <input type="tel" name="phone" value="<%= company.phone %>" class="form-control" id="phone" placeholder="<%= __("company.phone") %>" pattern="^((\+\d{1,3})[ .-]?\d|0\d)([ .-]?\d{2}){4}$">
        </div>
    </div>
    <br>
    <div class="form-group row">
        <label class="col-sm-10 text-right" for="defaultNumber"><%= __("company.defaultNumber") %></label>
        <div class="col-sm-2">
            <input type="number" name="defaultNumber" value="<%= company.defaultNumber %>" class="form-control" id="defaultNumber" placeholder="<%= __("company.defaultNnumber") %>">
        </div>
    </div>
    <br>
    <table class="table table-bordered defaultDays text-center">
        <thead>
            <tr>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.monday") %></th>
                <th class="text-center" style="width: 14.29%" cope="col"><%= __("time.tuesday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.wednesday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.thursday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.friday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.saturday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.sunday") %></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td data-form="defaultDay1" data-value="<%= company.defaultDay1 %>"><%= __(company.defaultDay1) %></td>
                <td data-form="defaultDay2" data-value="<%= company.defaultDay2 %>"><%= __(company.defaultDay2) %></td>
                <td data-form="defaultDay3" data-value="<%= company.defaultDay3 %>"><%= __(company.defaultDay3) %></td>
                <td data-form="defaultDay4" data-value="<%= company.defaultDay4 %>"><%= __(company.defaultDay4) %></td>
                <td data-form="defaultDay5" data-value="<%= company.defaultDay5 %>"><%= __(company.defaultDay5) %></td>
                <td data-form="defaultDay6" data-value="<%= company.defaultDay6 %>"><%= __(company.defaultDay6) %></td>
                <td data-form="defaultDay0" data-value="<%= company.defaultDay0 %>"><%= __(company.defaultDay0) %></td>
            </tr>
        </tbody>
    </table>

    <input type="hidden" name="defaultDay1" value="<%= company.defaultDay1 %>"/>
    <input type="hidden" name="defaultDay2" value="<%= company.defaultDay2 %>"/>
    <input type="hidden" name="defaultDay3" value="<%= company.defaultDay3 %>"/>
    <input type="hidden" name="defaultDay4" value="<%= company.defaultDay4 %>"/>
    <input type="hidden" name="defaultDay5" value="<%= company.defaultDay5 %>"/>
    <input type="hidden" name="defaultDay6" value="<%= company.defaultDay6 %>"/>
    <input type="hidden" name="defaultDay0" value="<%= company.defaultDay0 %>"/>

    <br>
    <div class="text-right">
        <button type="submit" class="btn btn-primary text-right"><%= __("global.save") %></button>
    </div>
</form>

<script>
$(document).ready(function() {
    var typeOrder = ['time.allday', 'time.morning', 'time.afternoon', 'time.closed'];
    var typeTranslations = {
        'time.allday': "<%= __("time.allday") %>",
        'time.morning': "<%= __("time.morning") %>",
        'time.afternoon': "<%= __("time.afternoon") %>",
        'time.closed': "<%= __("time.closed") %>" %>
    };

    $('table.defaultDays td').click(function() {
        var index = typeOrder.indexOf($(this).attr("data-value"));
        var nextIndex = (index + 1) % typeOrder.length;
        var value = typeOrder[nextIndex];
        var form = $(this).attr("data-form");        

        $(this).attr("data-value", value);
        $(this).text(typeTranslations[value]);
        $("input[name=" + form + "]").val(value);
    });
});
</script>


<%- include ../footer.ejs %>
