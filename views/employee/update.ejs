<%- include ../header.ejs %>

<h2>Modification du salarié</h2>
<br>
<form action="/employee/<%= employee.id %>/update" method="post">
    <div class="form-group row">
        <label class="col-sm-2" for="lastName"><%= __("employee.lastName") %></label>
        <div class="col-sm-10">
            <input type="text" name="lastName" value="<%= employee.lastName %>" class="form-control" id="lastName" placeholder="<%= __("employee.lastName") %>">
        </div>
    </div>
    <div class="form-group row">
        <label class="col-sm-2" for="firstName"><%= __("employee.firstName") %></label>
        <div class="col-sm-10">
            <input type="text" name="firstName" value="<%= employee.firstName %>"class="form-control" id="firstName" placeholder="<%= __("employee.firstName") %>">
        </div>
    </div>
    <div class="form-group row">
        <label class="col-sm-2" for="category"><%= __("employee.category") %></label>
        <div class="col-sm-10">
            <input type="text" name="category" value="<%= employee.category %>" class="form-control" id="category" placeholder="Catégorie">
        </div>
    </div>
    <div class="form-group row">
        <label class="col-sm-2" for="email"><%= __("employee.email") %></label>
        <div class="col-sm-10">
            <input type="email" name="email" value="<%= employee.email %>" class="form-control" id="email" placeholder="<%= __("employee.email") %>">
        </div>
    </div>
    <div class="form-group row">
        <label class="col-sm-2" for="phone"><%= __("employee.phone") %></label>
        <div class="col-sm-10">
            <input type="tel" name="phone" value="<%= employee.phone %>" class="form-control" id="phone" placeholder="<%= __("employee.phone") %>" pattern="^((\+\d{1,3})[ .-]?\d|0\d)([ .-]?\d{2}){4}$">
        </div>
    </div>
    <br>
    <div class="form-group row">
        <label class="col-sm-10 text-right" for="defaultNumber"><%= __("employee.defaultNumber") %></label>
        <div class="col-sm-2">
            <input name="defaultNumber" value="<%= employee.defaultNumber %>" class="form-control" id="defaultNumber" placeholder="<%= __("employee.defaultNnumber") %>">
        </div>
    </div>
    <br>
    <table class="table table-bordered defaultDays text-center">
        <thead>
            <tr>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.monday") %></th>
                <th class="text-center" style="width: 14.29%" cope="col"><%= __("time.tuesday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.wednesday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.thursday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.friday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.saturday") %></th>
                <th class="text-center" style="width: 14.29%" scope="col"><%= __("time.sunday") %></th>
            </tr>
        </thead>
        <tbody>
            <tr>
                <td data-form="defaultDay1" data-value="<%= employee.defaultDay1 %>"><%= __(employee.defaultDay1) %></td>
                <td data-form="defaultDay2" data-value="<%= employee.defaultDay2 %>"><%= __(employee.defaultDay2) %></td>
                <td data-form="defaultDay3" data-value="<%= employee.defaultDay3 %>"><%= __(employee.defaultDay3) %></td>
                <td data-form="defaultDay4" data-value="<%= employee.defaultDay4 %>"><%= __(employee.defaultDay4) %></td>
                <td data-form="defaultDay5" data-value="<%= employee.defaultDay5 %>"><%= __(employee.defaultDay5) %></td>
                <td data-form="defaultDay6" data-value="<%= employee.defaultDay6 %>"><%= __(employee.defaultDay6) %></td>
                <td data-form="defaultDay0" data-value="<%= employee.defaultDay0 %>"><%= __(employee.defaultDay0) %></td>
            </tr>
        </tbody>
    </table>

    <input type="hidden" name="defaultDay1" value="<%= employee.defaultDay1 %>"/>
    <input type="hidden" name="defaultDay2" value="<%= employee.defaultDay2 %>"/>
    <input type="hidden" name="defaultDay3" value="<%= employee.defaultDay3 %>"/>
    <input type="hidden" name="defaultDay4" value="<%= employee.defaultDay4 %>"/>
    <input type="hidden" name="defaultDay5" value="<%= employee.defaultDay5 %>"/>
    <input type="hidden" name="defaultDay6" value="<%= employee.defaultDay6 %>"/>
    <input type="hidden" name="defaultDay0" value="<%= employee.defaultDay0 %>"/>

    <br>
    <div class="text-right">
        <button type="submit" class="btn btn-primary text-right"><%= __("global.save") %></button>
    </div>
</form>

<script>
$(document).ready(function() {
    var typeOrder = ['time.allday', 'time.morning', 'time.afternoon', 'time.closed'];
    var typeTranslations = {
        'time.allday': "<%= __("time.allday") %>",
        'time.morning': "<%= __("time.morning") %>",
        'time.afternoon': "<%= __("time.afternoon") %>",
        'time.closed': "<%= __("time.closed") %>" %>
    };

    $('table.defaultDays td').click(function() {
        var index = typeOrder.indexOf($(this).attr("data-value"));
        var nextIndex = (index + 1) % typeOrder.length;
        var value = typeOrder[nextIndex];
        var form = $(this).attr("data-form");

        console.log(form);

        $(this).attr("data-value", value);
        $(this).text(typeTranslations[value]);
        $("input[name=" + form + "]").val(value);
    });
});
</script>

<%- include ../footer.ejs %>
